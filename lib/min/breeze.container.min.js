(function($,undefined){var layoutManager=new function(){var containers=[];this.push=function(layout){containers.push(layout)};this.pop=function(layout){for(var i=containers.length-1;i>=0;i--){if(containers[i]==layout){return containers.splice(i,1)[0]}}return null};this.getParent=function(layout){var element=layout.element.parent();while(element.length&&!element.is("body")){if(element.hasClass("breeze-container")){var widget=$.data(element[0],element.attr("widgetName"));if(widget){return widget}}element=element.parent()}return null};this.getChildren=function(layout){var children=[];for(var i=0,widget;widget=containers[i];i++){if(layout==widget.getParent()){children.push(widget)}}return children}}();$.widget("ui.container",{options:{width:"100%",height:"auto"},_create:function(){this._render();this._funnelEvents()},_render:function(){var element=this.element,options=this.options;element.addClass("breeze-container").css({width:options.width,height:options.height}).attr("widgetName",this.widgetName);layoutManager.push(this);this.render()},render:function(){},_funnelEvents:function(){if(null==this.getParent()){var self=this;$(window).bind("resize."+this.element.attr("id"),function(){clearTimeout(self.durhandle);self.durhandle=setTimeout(function(){self.resize(true)},50)})}this.funnelEvents()},funnelEvents:function(){},getParent:function(){return layoutManager.getParent(this)},getChildren:function(element){var children=layoutManager.getChildren(this);if(null==element){return children}var result=[];element=$(element)[0];$.each(children,function(index,child){if(jQuery.contains(element,child.element[0])){result.push(child)}});return result},isPercentHeight:function(){return String(this.options.height).indexOf("%")>0},destroy:function(){if(null==this.getParent()){$(window).unbind("resize."+this.element.attr("id"))}layoutManager.pop(this)},resize:function(wr){$.each(this.getChildren(),function(index,child){child.resize(wr)})},notifyParentResize:function(){var parent=this.getParent();if(parent){parent.notifyParentResize(this)}},loadContext:function(data){var context=data.context,html=data.html,node=data.node,get=data.get,url=data.url,pattern=data.pattern||"xhr",parameters=data.parameters,complete=data.complete||function(){};if(html!=null){/^#/.test(html)&&context.append($(html))||context.html(html);complete();return}if(node!=null){context.append(node);complete();return}if(jQuery.isFunction(get)){get(function(node){context.append(node||document.createTextNode("&nbsp;"));complete()});return}if(null==url||""==url){return}if("xhr"==pattern){breeze.xhrload({url:url,context:context,parameters:parameters||{},load:function(){complete()}})}else{if("iframe"==pattern){breeze.mask.showBoxLoading(context);var iframe=$("<iframe frameBorder='0' width='100%' height='100%'></iframe>");iframe.bind(document.attachEvent?"readystatechange":"load",function(){var readyState=this.readyState;if(null==readyState||"complete"==readyState||"loaded"==readyState){if(iframe._loaded){return}iframe._loaded=true;breeze.mask.hideBoxLoading(context);complete()}}).attr("src",url+(/\?/.test(url)?"&":"?")).appendTo(context)}}}})})(jQuery);