(function($,undefined){$.widget("ui.titlepane",$.ui.container,{options:{title:"标题",expanded:true,toggleable:true,onExpand:null,onCollapse:null,buttons:[],headerToggle:true},render:function(){var element=this.element,options=this.options,header=$("<div class='header'>"+"<div class='buttons'>"+this.generateButtons()+"</div>"+"<div class='toggle'></div>"+"<div class='title'>"+options.title+"</div>"+"</div>"),body=$("<div class='body'></div>");options.expanded?header.addClass("on"):body.hide();if(!options.toggleable){$(">.toggle",header).hide()}element.addClass("breeze-titlepane");element.append(header).append(body)},resize:function(){var height=this.options.height,element=this.element;if(!this._hasInit){var options=this.options;this.loadContext({context:$(">.body",this.element),html:options.html,node:options.node,get:options.get,url:options.url,pattern:options.pattern,parameters:options.parameters,complete:options.onload});this._hasInit=true}if(!$(">.header",this.element).hasClass("on")){return}if(height!="auto"){element.height(height);var h=element.height();element.height("auto");$(">.body",element).height(h-27)}$.each(this.getChildren(),function(index,child){child.resize()})},generateButtons:function(){var html=[];for(var i=0,b;b=this.options.buttons[i];i++){html.push("<img class='button "+(b.cls||"")+"' title='"+(b.title||"")+"' src='"+(b.iconURL||breeze.getBlankIcon())+"'>")}return html.join("")},funnelEvents:function(){var self=this;$(">.header",this.element).click(function(e){var target=$(e.target);if(target.hasClass("button")){var index=$(">.button",target.parent()).index(target),onClick=self.options.buttons[index].onClick;onClick&&onClick(self);return}if(self.options.headerToggle||target.hasClass("toggle")){self.toggle()}})},toggle:function(){if(false==this.options.toggleable){return}var header=$(">.header",this.element),self=this;if(header.hasClass("on")){header.removeClass("on");$(">.body",this.element).slideUp("fast",function(){self.onCollapse&&self.onCollapse();self.notifyParentResize()})}else{header.addClass("on");$(">.body",this.element).slideDown("fast",function(){self.resize();self.onExpand&&self.onExpand();self.notifyParentResize()})}},expand:function(){var header=$(">.header",this.element);if(!header.hasClass("on")){this.toggle()}},collapse:function(){var header=$(">.header",this.element);if(header.hasClass("on")){this.toggle()}}})})(jQuery);