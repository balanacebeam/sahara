(function($,undefined){$.ui.grid.mergecol=function(grid,params){this.grid=grid;this._create(params)};$.ui.grid.mergecol.prototype={_create:function(params){this.params=params||{};this.grid.subscribe("renderContent.grid-mergecol",this,"mergeCol")},mergeCol:function(viewport){var beginIndex=viewport.beginRowIndex,cols=this.params.cols,cascade=false!=this.params.cascade,dataProvider=this.grid.runtime.dataProvider,visibleRows=viewport.visibleRows,mergeColsMap={},value,preValue,num=0;for(var i=0,col;null!=(col=cols[i]);i++){var mp=mergeColsMap[col]=[];preValue=null;for(var k=0,row;k<visibleRows;k++){row=dataProvider[beginIndex+k]["d"];value=String(row[col]);if(null==preValue){num=1;preValue=value}else{if(value!=preValue||(cascade&&0!=i&&null!=mergeColsMap[i-1][k])){mp[k-num]=num;preValue=value;num=1}else{num++}}if(k==visibleRows-1){mp[visibleRows-num]=num}}}this.grid.runtime.mergeColsMap=mergeColsMap},destroy:function(){this.grid.unsubscribe("renderContent.grid-mergecol")}};$.ui.grid.plugins.register("mergecol",$.ui.grid.mergecol)})(jQuery);